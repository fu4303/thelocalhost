---
date: 2020-05-02
title: CSS Variables Fallback
tags: ['information', 'markdown']
published: false
---

I used CSS variables to make a theme switch, light and dark, I've done
this in the past using styled-components but not attempted it via the
CSS variables route.

With styled-components there was a theme that was defined in the
`theme` object then use the styled-components `ThemProvider` to switch
between the two.

This time I used a React hook to switch the theme and used CSS
variables to switch between the two.

I decided to use variables for lot's of other things besides a simple
colour, I used it for gradients

```css
--title-gradient: linear-gradient(
  $ {({theme}) => theme.colours.primary[200]},
  $ {({theme}) => theme.colours.primary[500]}
);
--qrt-turn-gradient: linear-gradient(
  0.25turn,
  $ {({theme}) => theme.colours.primary[200]},
  $ {({theme}) => theme.colours.primary[500]}
);
```

But then was getting janky first render and couldn't work out what I
had done wrong.

I was using the CSS gradient like this:

```css
background: var(--title-gradient);
-webkit-background-clip: text;
background-clip: text;
-webkit-text-fill-color: transparent;
```

I getting an awful flash of unstyled content, the text was transparent
before the gradient rendered. I found that if I didn't use the
variable then it rendered fine, but I needed to use the variable or no
theme!

So I was searching for a fallback solution but couldn't find anything
and it wasn't until I found this article that I realised that I was
adding the fallback in the wrong place.

https://medium.com/fbdevclagos/how-to-leverage-styled-components-and-css-variables-to-build-truly-reusable-components-in-react-4bbf50467666
